# CURSOR RULES --- SHORT VERSION (SpareFinanceApp)

## 1. Architecture (Clean + DDD)

Layers: 1. `src/domain/` --- Types, Zod schemas, constants (no business
logic) 2. `src/application/` --- Business logic (services, mappers,
factories) 3. `src/infrastructure/` --- Data access (repositories),
external services 4. `src/presentation/` --- API routes, components,
hooks (no business logic)

## 2. Layer Rules (Do / Don't)

-   **Domain:** pure types/validations/constants only; no `any`; no
    business logic\
-   **Application:** business logic only; validates inputs; no DB/UI\
-   **Infrastructure:** repositories only; DB access; map
    snake_caseâ†’camelCase\
-   **Presentation:** API routes + components; no logic; no DB

## 3. `any` Rules

-   Domain: **never**\
-   Application: only around parsing + validate\
-   Infrastructure: only for external inputs + validate\
-   Presentation: allowed for UI flexibility, but prefer proper typing

## 4. Required Patterns

-   API routes call services via factories\
-   Services contain business rules\
-   Repositories do DB access + mapping\
-   Components fetch from `/api/v2/*` and render only

## 5. Database Naming

-   DB = `snake_case`\
-   Domain = `camelCase`

## 6. Subscription Rules (Short)

-   SubscriptionContext stores all subscription state\
-   Components use selectors, never subscription logic\
-   Decision services handle access rules

## 7. General Coding Rules

-   Write in **English**\
-   Use **design tokens**\
-   Validate all external data with **Zod**\
-   Prefer **reusable components**
